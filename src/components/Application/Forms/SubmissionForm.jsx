import {AnimatePresence, motion} from 'framer-motion'
import { useNavigate } from "react-router-dom";
import { FaArrowLeft } from "react-icons/fa6";
import { FaRobot } from "react-icons/fa6";
import { useEffect, useState } from 'react';
import { useSetAtom } from 'jotai';
import { statusIndicatorContext } from '../../../App';

const ThankYouSection = ()=> {

    const navigate = useNavigate();
    const setStatus = useSetAtom(statusIndicatorContext)

    useEffect(()=> {
        window.localStorage.setItem('is_form_submited', true)

        setStatus({
            type: 'success',
            title: 'Application submitted successfully!',
            message: 'You can start attend the AI Interview.',
            show: true
        })

    }, [])

    return (
        <motion.div 
            className="nep_application_formwrapper"
            initial={{ opacity: 0, scale: 0.7 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.7 }}
            transition={{ duration: 0.3, ease: [0.5, 1, 0.89, 1], delay: 0.15 }}
        >

            <div className="nep_application_start">
                <div className='icon_'>
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 324.2 338.9" enableBackground="new 0 0 324.2 338.9" xmlSpace="preserve">
                        <g>
                            <path fill="#121212" d="M7.3,169.4C7.3,84.3,76.8,14.7,162,14.6c85.3-0.1,155.2,69.8,154.9,155c-0.2,85.3-69.8,154.7-154.9,154.6
                                C76.9,324.1,7.3,254.6,7.3,169.4z M302.1,169.4c0-77.2-62.7-139.9-139.9-140C85.1,29.3,22.3,92,22.1,169.2
                                C22,246.5,84.9,309.5,162.2,309.4C239.4,309.4,302.1,246.6,302.1,169.4z"/>
                            <path fill="#FE6723" d="M58.9,33c0,14.3-11.3,25.7-25.6,25.8C19,58.8,7.2,47.2,7.3,32.9C7.4,18.8,19.1,7.2,33.2,7.3
                                C47.3,7.3,58.8,18.8,58.9,33z M33.3,22c-5.9-0.1-11,4.9-11.1,10.8c-0.1,6.1,5,11.3,11.1,11.3c6,0,10.9-5,10.9-11
                                C44.1,27.1,39.2,22.1,33.3,22z"/>
                            <path fill="#FE6723" d="M280.2,338.9C268,339,258,329.1,257.9,317c-0.1-12.2,9.7-22.1,21.9-22.3c12.1-0.1,22.2,9.8,22.2,22
                                C302.2,328.9,292.4,338.8,280.2,338.9z M272.8,316.8c0,4.1,3.3,7.4,7.3,7.4c4,0,7.2-3.3,7.2-7.4c0-4.1-3.2-7.4-7.3-7.4
                                C276,309.5,272.8,312.7,272.8,316.8z"/>
                            <path fill="#121212" d="M316.8,81c-4-0.1-7.3-3.5-7.2-7.5c0.1-4,3.5-7.3,7.4-7.3c4,0.1,7.3,3.5,7.2,7.5
                                C324.2,77.7,320.7,81.1,316.8,81z"/>
                            <path fill="#FE6723" d="M7.2,272.6c-4-0.1-7.3-3.5-7.2-7.5c0.1-4,3.5-7.3,7.5-7.3c4,0.1,7.3,3.5,7.2,7.5
                                C14.6,269.4,11.2,272.7,7.2,272.6z"/>
                            <path fill="#121212" d="M324.2,265.3c-0.1,4-3.5,7.4-7.4,7.3c-4-0.1-7.3-3.5-7.2-7.5c0-4,3.4-7.3,7.4-7.3
                                C320.9,257.9,324.3,261.3,324.2,265.3z"/>
                            <path fill="#121212" d="M58.9,324.3c-0.1,4.1-3.5,7.3-7.5,7.2c-4-0.2-7-3.3-7-7.3c0-4.1,3.3-7.4,7.4-7.3
                                C55.7,316.9,58.9,320.2,58.9,324.3z"/>
                            <path fill="#FE6723" d="M272.7,7.2c0,4-3.3,7.4-7.4,7.3c-4.1,0-7.4-3.3-7.3-7.4c0.1-3.9,3.2-7.1,7.2-7.2
                                C269.2-0.1,272.6,3.1,272.7,7.2z"/>
                            <path fill="#121212" d="M14.7,81c0,4-3.4,7.4-7.3,7.4C3.4,88.3,0,85,0,81c0-4,3.4-7.3,7.4-7.3C11.4,73.6,14.7,76.9,14.7,81z"/>
                            <path fill="#121212" d="M162.2,287.3c-64.7,0.3-117.5-52.4-118-117.6C43.7,105,96.8,51.7,162,51.5c64.9-0.2,118.2,53.1,118,118
                                C279.9,234.5,227.3,287.1,162.2,287.3z M169.5,78.6c0,3,0,6,0,9c0,0.2,0,0.5,0,0.7c-0.3,4.1-2.7,6.7-6.7,7.3
                                c-1.4,0.2-2.7,0.2-4.1,0.3c-30.8,2.4-52.4,17.8-64.9,46.1c-3.8,8.7-5.1,17.9-5.5,27.3c-0.2,4.7-3.5,7.7-7.6,7.5
                                c-4.1-0.2-6.9-3.4-7-8.1c-0.1-5.4,0.6-10.7,1.5-16c6.4-36.3,38.6-66.8,74.7-70.8c3.8-0.4,4.9-1.6,4.8-5.4
                                c-0.3-10.6-0.2-10.9-10.5-8.7c-42.5,9-71.1,34.2-81.9,76.3c-10.7,41.9,2.2,77.6,35.1,105.6c14.9,12.7,32.5,19.6,51.9,22.2
                                c5.3,0.7,5.3,0.7,5.3-4.7c0-4.6,0-9.2,0-13.8c0-7.8,2.1-10.1,9.9-10.3c9.2-0.3,18.1-2,26.5-5.9c27.5-12.8,42.5-34.4,44.6-64.7
                                c0.1-1.7,0.1-3.5,0.6-5.2c0.9-3.3,4.4-5.5,7.8-5.1c4,0.5,6.4,3.6,6.5,8.2c0.4,40.8-30.8,78.2-71.3,85.9c-3.1,0.6-7.6-0.4-9.1,2
                                c-1.5,2.4-0.3,6.5-0.6,9.9c-0.4,3.7,1.2,4.5,4.4,3.9c3.4-0.6,6.9-0.9,10.3-1.8c43.2-11.2,71-38.4,79.1-82.2
                                c8-43.3-7.9-78.3-43.6-104c-13.7-9.9-29.4-15.1-46.1-17.1c-3-0.4-4.4,0.1-4,3.5C169.8,73.1,169.5,75.8,169.5,78.6z"/>
                            <path fill="#FE6723" d="M228.6,145.4c-0.2,5.6-2.2,10.8-6.4,15.1c-24.1,24.2-48.3,48.4-72.5,72.5c-3.7,3.7-7.8,3.7-11.5,0
                                c-12-12-24.1-23.9-36-36c-8.8-9-8.6-22.6,0.2-31.2c8.7-8.6,22.3-8.4,31.3,0.3c2.7,2.6,5.4,5.2,7.9,8c1.7,2,2.8,1.9,4.6,0.1
                                c13.4-13.6,27-27,40.4-40.5c4.2-4.3,8.4-8.5,14.6-10C215.1,120.2,228.6,130.7,228.6,145.4z M117.7,174.1c-0.3,0.1-0.8,0.1-1.3,0.2
                                c-2.8,0.7-4.6,2.3-5.5,5c-1.1,3.3,0.3,5.8,2.5,8.1c9.3,9.4,18.8,18.6,28,28.1c2.2,2.3,3.3,1.8,5.2-0.2
                                c21.1-21.2,42.3-42.4,63.5-63.5c0.8-0.8,1.6-1.6,2.3-2.5c2.2-3,1.9-7-0.7-9.5c-2.5-2.5-6.6-2.8-9.6-0.7c-1.1,0.8-2,1.8-3,2.8
                                c-16.3,16.3-32.6,32.6-49,48.9c-4.3,4.3-8,4.3-12.3,0.1c-4.7-4.6-9.4-9.3-14-14C122.2,175.3,120.3,174.2,117.7,174.1z"/>
                        </g>
                    </svg>
                </div>
                <h3><span>Thank You, </span> for your submission !</h3>
                <p>Form submitted!. Your submission is important to us and appreciated. Our team will carefully review the details provided. <strong>You can start your AI interview.</strong></p>
                <div className="nep_btn_group center_">
                    <button type="button" className="nep_btn" onClick={()=> navigate('/interview')}>
                        <span>Start The Interview</span>
                        <i><FaRobot /></i> 
                    </button>
                </div>
            </div>
        
        </motion.div>
    )
}

const UploadFormSection = ()=> {

    return (
        <motion.div 
            className="nep_application_formwrapper"
            initial={{ opacity: 0, scale: 0.7 }}
            animate={{ opacity: 1, scale: 1 }}
            exit={{ opacity: 0, scale: 0.7 }}
            transition={{ duration: 0.3, ease: [0.5, 1, 0.89, 1] }}
        >
            <div className="nep_application_start">
                <div className="upload_progress">
                    <div className="svg_">
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                viewBox="0 0 512 512" enableBackground="new 0 0 512 512" xmlSpace="preserve">
                            <circle fill="none" stroke="#000" strokeWidth="25" strokeMiterlimit="10" cx="256" cy="256" r="240.7"/>
                            <circle fill="none" stroke="#000" strokeWidth="25" strokeMiterlimit="10" cx="256" cy="256" r="240.7" className="progress_circle" strokeLinecap="round" />
                        </svg>
                    </div>

                    <div className="icon_anim">
                    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                    viewBox="0 0 291.4 308.8" enableBackground="new 0 0 291.4 308.8" xmlSpace="preserve">
                            <g>
                                <path fill="#121212" d="M277.2,64.4c-0.1-13-10-22.8-23.1-22.9c-6.5,0-13,0-19.5,0c-2.9,0-5.8,0-8.7,0c-5,0-9.9,0-14.9,0
                                    c-11.8,0-23.9,0-35.9,0c-7.9,0-13.7-5.3-14.1-12.8C159.8,10.5,148.6,0,130.3,0C97.1,0,63.8,0,30.6,0C11.7,0,0,11.7,0,30.6
                                    c0,69.6,0,139.1,0,208.7c0,16.5,9.4,25.9,25.9,26c11.1,0,22.2,0,33.3,0c10.3,0,20.5,0,30.6,0l18.3,0c1.1,0,2.4,0,3.8-0.3
                                    c4-0.7,6.8-3.7,6.5-7.1c-0.3-3.8-2.6-6.2-6.4-6.7c-1.8-0.3-3.7-0.3-5.2-0.3c-27.2,0-54.3,0-81.5,0c-8.5,0-11.2-2.8-11.2-11.4
                                    c0-20.9,0-41.8,0-62.7l0-32.1c0-10,0-19.9,0-29.9c0-4.1,1.4-6.9,4.4-8.7c2.3-1.3,4.9-1.5,8-1.5c0,0,0,0,0,0c29.2,0,58.4,0,87.6,0
                                    l55.6,0c27.3,0,54.6,0,81.9,0c8.3,0,11.5,3.2,11.5,11.4c0,4.4,0,8.7,0,13.1c0,6,0,12,0,17.9c0,5.5,2.5,8.6,6.9,8.6
                                    c2,0,3.7-0.6,4.9-1.8c1.5-1.5,2.3-3.7,2.3-6.6l0-12.4C277.3,111.9,277.3,88,277.2,64.4z M14.1,60.4c0-3.5,0-7.1,0-10.6l0-6.1
                                    c0-4.7,0-9.3,0-14c0-10.2,5.5-15.7,15.8-15.7c11.9,0,23.8,0,35.7,0l15.1,0l14.6,0c11.8,0,23.6,0,35.4,0c10.3,0,15.7,5.2,16.1,15.6
                                    c0.6,14.3,13.1,26,27.9,26c17.5,0.1,35.2,0,52.4,0c8.1,0,16.3,0,24.4,0c8.8,0,11.6,2.8,11.6,11.4c0,2.4,0,4.9,0,7.3
                                    c0,5.3,0,10.7,0,16.1c0,1.5-0.2,1.7-0.3,1.8c0,0-0.3,0.2-1.5-0.2c-3.2-1.1-6.5-1.4-10.4-1.4c0,0,0,0,0,0c-74.9,0-149.8,0-224.7,0
                                    c-2.9,0-6.5,0-9.7,1.2c-1.6,0.6-2,0.4-2.1,0.3C14,91.9,14,90.2,14,89.7C14.1,79.9,14.1,70,14.1,60.4z"/>
                                <path fill="#121212" d="M74.8,150.7c1.2,0,2.5,0,3.7,0c1.2,0,2.4,0,3.7,0c1.3,0,2.7,0,4,0c3.1,0,6.2,0,9.3,0c4.9-0.1,8.2-2.9,8.3-7
                                    c0-4.2-3.3-7-8.2-7c-8.7-0.1-17.3-0.1-25.6,0c-2.6,0-4.8,0.8-6.2,2.3c-1.2,1.3-1.8,2.9-1.8,4.9c0.1,4.1,3.1,6.8,7.9,6.9
                                    C71.5,150.7,73.2,150.7,74.8,150.7z"/>
                                <path fill="#121212" d="M69.9,179.8c1.6,0,3.3,0,4.9,0c1.4,0,2.8,0,4.1,0c1.2,0,2.5,0,3.7,0h0c1.4,0,2.8,0,4.1,0c3,0,6,0,9-0.1
                                    c4.6-0.1,7.9-3.1,7.8-7.1c0-4.1-3.2-6.8-7.9-6.9c-8.1-0.1-16.6-0.1-25.9,0c-4.9,0-7.8,2.6-7.9,6.8C61.9,177,65,179.7,69.9,179.8z"
                                    />
                                <path fill="#121212" d="M46.5,138.9c-1.3-1.4-3.1-2.2-4.9-2.2c0,0-0.1,0-0.1,0c-3.6,0-6.8,3.1-7,6.7c-0.1,1.8,0.7,3.7,2,5.1
                                    c1.3,1.4,3.1,2.2,4.9,2.2c0,0,0,0,0.1,0c3.6,0,6.8-3,6.9-6.7C48.5,142.1,47.8,140.2,46.5,138.9z"/>
                                <path fill="#121212" d="M48.4,172.9c0-1.9-0.7-3.6-2-5c-1.3-1.3-3.1-2-5-2c-3.7,0.1-6.8,3.2-6.9,6.8c0,1.8,0.8,3.6,2.2,5
                                    c1.3,1.3,3.1,2.1,4.8,2.1c0,0,0.1,0,0.1,0h0C45.2,179.7,48.4,176.5,48.4,172.9z"/>
                                <g className="upload_icon_anim">
                                    <path fill="#FE6723" d="M201,139.3c-0.1,0-0.2,0-0.4,0c-20.6,0.1-39.7,8.1-53.9,22.6c-14.1,14.3-22,33.7-21.7,53.2
                                        c-0.4,19.7,7.5,39.3,21.6,53.7c14.2,14.6,33.5,22.6,54.1,22.7c0.1,0,0.1,0,0.2,0c20.6,0,39.8-7.9,54-22.3
                                        c14.2-14.3,22-33.3,22-53.7c0-20.5-7.9-39.8-22.3-54.1C240.5,147.1,221.4,139.3,201,139.3z M200.9,153c16.8,0,32.4,6.3,43.9,17.8
                                        c11.7,11.7,18.5,27.9,18.5,44.5c0,16.8-6.6,32.6-18.7,44.5c-11.9,11.7-27.5,18.1-43.9,17.8c-17.2-0.2-33-7-44.6-19
                                        c-11.3-11.7-17.6-27.5-17.2-43.2v0c-0.4-16,5.9-32,17.4-43.8c11.6-12,27.4-18.6,44.5-18.6C200.8,153,200.8,153,200.9,153z"/>
                                    <path fill="#FE6723" d="M168.3,216.9c1.3-0.7,2.4-1.8,3.3-2.7c3-3,5.9-5.9,8.9-8.9c3.8-3.8,7.7-7.7,11.6-11.5
                                        c0.2-0.2,0.5-0.5,0.7-0.8c0.4-0.5,0.8-0.9,1.1-1.1c0.2,0.6,0.1,1.3,0.1,2c0,0.4,0,0.7,0,1.1c0,10.4,0,20.8,0,31.2
                                        c0,8.5,0,17,0,25.5l0,0.5c0,1.5,0,3,0.4,4.5c0.9,3.5,3.3,5.5,6.5,5.5c0.2,0,0.4,0,0.6,0c3.6-0.3,5.9-2.6,6.2-6.4
                                        c0.1-1,0.1-2,0.1-3l0-0.8l0-13.9c0-14.5,0-29,0-43.5c0-0.3,0-0.7,0-1c-0.1-0.7-0.1-1.2,0-1.7c0.4,0.2,0.8,0.6,1.2,1.1
                                        c0.2,0.3,0.4,0.5,0.7,0.8c3.5,3.5,7,7,10.5,10.5c3.5,3.5,7,7,10.4,10.4c2.1,2.1,4.3,3.2,6.5,3.1c1.7,0,3.3-0.8,4.6-2.1
                                        c2.9-3.1,2.5-7.1-1.2-10.7c-12.6-12.6-23.1-23.1-33.1-33.1c-4.7-4.7-7.9-4.7-12.6,0c-11,11-22.1,22-33.1,33.1
                                        c-0.8,0.8-1.6,1.6-2.2,2.6c-1.7,2.8-1.4,5.8,1,8.2C162.6,218.1,165.4,218.5,168.3,216.9z"/>
                                </g>
                            </g>
                            </svg>
                    </div>
                </div>
                <h3>We got your <span>Applicaiton</span>. Please wait!</h3>
                <p>This may take a moment. Your patience is valued. Thank you for understanding as we ensure a secure and successful upload process.</p>
            </div>
        </motion.div>
    )
}

const FinishedSection = ()=> {
    return (
        <div className="nep_application_formwrapper">
            <div className="nep_application_start">
                Application Form Submitted !
            </div>
        </div>
    )
}

const SubmissionForm = () => {

    const [isUpload, setIsUpload] = useState(true)
    const isFormSubmited = window.localStorage.getItem('is_form_submited')

    useEffect(()=> {

        if(isFormSubmited == 'true') return;

        setTimeout(()=> {
            setIsUpload(false)
        }, 6000)

    }, [])

   
  return (
    <AnimatePresence>
        {
            isUpload ? 
            <UploadFormSection />
            :
            <ThankYouSection />
        }
    </AnimatePresence>
  )
}

export default SubmissionForm